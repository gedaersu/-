<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
		<title></title>
		<link rel="stylesheet" type="text/css" href="css/index.css"/>
	</head>
	<body>
		<div id="wrap">
			<!--头部-->
			<header id="header">
				<!--头部上半部-->
				<div id="headerTop">
					<!--logo-->
					<h1 id="logo">
						<a href="###">
							<img src="img/logo.png"/>
						</a>
					</h1>
					<!--菜单按钮-->
					<a href="###" id="menuBtn" class="menuBtnClose"></a>
					<!--按钮区域-->
					<div id="btns">
						<a href="###" id="searchBtn">搜索</a>
						<a href="###">登录</a>
						<a href="###">注册</a>
					</div>
				</div>
				<!--头部下半部-->
				<form id="search">
					<input type="text" placeholder="请输入搜索内容。。。" />
					<input type="submit" value="搜索"/>
				</form>
				<!--遮罩层-->
				<ul id="list">
					<li>
						<a href="javascript:;">首页</a>
					</li>
					<li>
						<a href="javascript:;">MV</a>
					</li>
					<li>
						<a href="javascript:;">悦单</a>
					</li>
					<li>
						<a href="javascript:;">V榜</a>
					</li>
					<li>
						<a href="javascript:;">音悦</a>
					</li>
					<li>
						<a href="javascript:;">商城</a>
					</li>
					<li>
						<a href="javascript:;">节目</a>
					</li>
					<li>
						<a href="javascript:;">饭团</a>
					</li>
					<li>
						<a href="javascript:;">资讯</a>
					</li>
					<li>
						<a href="javascript:;">我的家</a>
					</li>
					<li>
						<a href="javascript:;">APP下载</a>
					</li>
					<li>
						<a href="javascript:;">热门应用</a>
					</li>
				</ul>				
			</header>
			
			<div id="conWrap">
			<!--内容区-->
				<div id="content">
				<!--导航-->
				<nav id="navsWrap">
					<ul id="navsList">
						<li class="active">
							<a href="javascript:;">首页</a>
						</li>
						<li>
							<a href="javascript:;">MV</a>
						</li>
						<li>
							<a href="javascript:;">悦单</a>
						</li>
						<li>
							<a href="javascript:;">V榜</a>
						</li>
						<li>
							<a href="javascript:;">音悦</a>
						</li>
						<li>
							<a href="javascript:;">商城</a>
						</li>
						<li>
							<a href="javascript:;">节目</a>
						</li>
						<li>
							<a href="javascript:;">饭团</a>
						</li>
						<li>
							<a href="javascript:;">资讯</a>
						</li>
						<li>
							<a href="javascript:;">我的家</a>
						</li>
						<li>
							<a href="javascript:;">APP下载</a>
						</li>
						<li>
							<a href="javascript:;">热门应用</a>
						</li>
					</ul>		
				</nav>
				
				<!--无缝-->
				<div id="pic_wrap">
					<ul id="pic_list">
						<li>
							<a href="###">
								<img src="img/1.jpg"/>
							</a>
						</li>
						<li>
							<a href="###">
								<img src="img/2.jpg"/>
							</a>
						</li>
						<li>
							<a href="###">
								<img src="img/3.jpg"/>
							</a>
						</li>
						<li>
							<a href="###">
								<img src="img/4.jpg"/>
							</a>
						</li>
						<li>
							<a href="###">
								<img src="img/5.jpg"/>
							</a>
						</li>
					</ul>
					<div id="pic_icons">
						<span class="active"></span>
						<span></span>
						<span></span>
						<span></span>
						<span></span>
					</div>
				</div>
				
				<!--tab页签-->
				<div class="tab">
					<div class="tabHeader">
						<h2>MV首播</h2>
						<a href="###">更多&gt;</a>
					</div>
					<nav class="tabNav">
						<a href="###">全部</a>
						<a href="###">内地</a>
						<a href="###">港台</a>
						<a href="###">欧美</a>
						<a href="###">韩国</a>
						<a href="###">日本</a>
						<span class="smallGreen"></span>
					</nav>
					
					<div class="tabWrap">
						<ul class="tabLoading"></ul>
						<ul class="tabList">
							<li>
								<a href="###">
									<img src="img/a.jpg" alt="" />
									<span>君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="iceLeft">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="iceRight">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="###">
									<img src="img/b.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="iceLeft">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="iceRight">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="###">
									<img src="img/c.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="iceLeft">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="iceRight">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="###">
									<img src="img/d.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="iceLeft">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="iceRight">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="###">
									<img src="img/e.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="iceLeft">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="iceRight">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="###">
									<img src="img/f.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="iceLeft">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="iceRight">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
						</ul>
						<ul class="tabLoading"></ul>						
					</div>	
					
				</div>
				<div class="tab">
					<div class="tabHeader">
						<h2>MV首播</h2>
						<a href="###">更多&gt;</a>
					</div>
					<nav class="tabNav">
						<a href="###">全部</a>
						<a href="###">内地</a>
						<a href="###">港台</a>
						<a href="###">欧美</a>
						<a href="###">韩国</a>
						<a href="###">日本</a>
						<span class="smallGreen"></span>
					</nav>
					
					<div class="tabWrap">
						<ul class="tabLoading"></ul>
						<ul class="tabList">
							<li>
								<a href="###">
									<img src="img/a.jpg" alt="" />
									<span>君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="iceLeft">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="iceRight">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="###">
									<img src="img/b.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="iceLeft">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="iceRight">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="###">
									<img src="img/c.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="iceLeft">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="iceRight">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="###">
									<img src="img/d.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="iceLeft">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="iceRight">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="###">
									<img src="img/e.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="iceLeft">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="iceRight">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="###">
									<img src="img/f.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="iceLeft">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="iceRight">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
						</ul>
						<ul class="tabLoading"></ul>						
					</div>	
					
				</div>
				
				<div class="tab">
					<div class="tabHeader">
						<h2>MV首播</h2>
						<a href="###">更多&gt;</a>
					</div>
					<nav class="tabNav">
						<a href="###">全部</a>
						<a href="###">内地</a>
						<a href="###">港台</a>
						<a href="###">欧美</a>
						<a href="###">韩国</a>
						<a href="###">日本</a>
						<span class="smallGreen"></span>
					</nav>
					
					<div class="tabWrap">
						<ul class="tabLoading"></ul>
						<ul class="tabList">
							<li>
								<a href="###">
									<img src="img/a.jpg" alt="" />
									<span>君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="iceLeft">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="iceRight">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="###">
									<img src="img/b.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="iceLeft">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="iceRight">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="###">
									<img src="img/c.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="iceLeft">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="iceRight">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="###">
									<img src="img/d.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="iceLeft">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="iceRight">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="###">
									<img src="img/e.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="iceLeft">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="iceRight">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="###">
									<img src="img/f.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="iceLeft">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="iceRight">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
						</ul>
						<ul class="tabLoading"></ul>						
					</div>	
					
				</div>
				<div class="tab">
					<div class="tabHeader">
						<h2>MV首播</h2>
						<a href="###">更多&gt;</a>
					</div>
					<nav class="tabNav">
						<a href="###">全部</a>
						<a href="###">内地</a>
						<a href="###">港台</a>
						<a href="###">欧美</a>
						<a href="###">韩国</a>
						<a href="###">日本</a>
						<span class="smallGreen"></span>
					</nav>
					
					<div class="tabWrap">
						<ul class="tabLoading"></ul>
						<ul class="tabList">
							<li>
								<a href="###">
									<img src="img/a.jpg" alt="" />
									<span>君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="iceLeft">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="iceRight">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="###">
									<img src="img/b.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="iceLeft">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="iceRight">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="###">
									<img src="img/c.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="iceLeft">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="iceRight">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="###">
									<img src="img/d.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="iceLeft">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="iceRight">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="###">
									<img src="img/e.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="iceLeft">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="iceRight">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="###">
									<img src="img/f.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="iceLeft">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="iceRight">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
						</ul>
						<ul class="tabLoading"></ul>						
					</div>	
					
				</div>
				<div class="tab">
					<div class="tabHeader">
						<h2>MV首播</h2>
						<a href="###">更多&gt;</a>
					</div>
					<nav class="tabNav">
						<a href="###">全部</a>
						<a href="###">内地</a>
						<a href="###">港台</a>
						<a href="###">欧美</a>
						<a href="###">韩国</a>
						<a href="###">日本</a>
						<span class="smallGreen"></span>
					</nav>
					
					<div class="tabWrap">
						<ul class="tabLoading"></ul>
						<ul class="tabList">
							<li>
								<a href="###">
									<img src="img/a.jpg" alt="" />
									<span>君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="iceLeft">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="iceRight">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="###">
									<img src="img/b.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="iceLeft">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="iceRight">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="###">
									<img src="img/c.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="iceLeft">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="iceRight">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="###">
									<img src="img/d.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="iceLeft">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="iceRight">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="###">
									<img src="img/e.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="iceLeft">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="iceRight">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="###">
									<img src="img/f.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="iceLeft">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="iceRight">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
						</ul>
						<ul class="tabLoading"></ul>						
					</div>	
					
				</div>
				<div class="tab">
					<div class="tabHeader">
						<h2>MV首播</h2>
						<a href="###">更多&gt;</a>
					</div>
					<nav class="tabNav">
						<a href="###">全部</a>
						<a href="###">内地</a>
						<a href="###">港台</a>
						<a href="###">欧美</a>
						<a href="###">韩国</a>
						<a href="###">日本</a>
						<span class="smallGreen"></span>
					</nav>
					
					<div class="tabWrap">
						<ul class="tabLoading"></ul>
						<ul class="tabList">
							<li>
								<a href="###">
									<img src="img/a.jpg" alt="" />
									<span>君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="iceLeft">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="iceRight">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="###">
									<img src="img/b.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="iceLeft">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="iceRight">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="###">
									<img src="img/c.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="iceLeft">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="iceRight">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="###">
									<img src="img/d.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="iceLeft">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="iceRight">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="###">
									<img src="img/e.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="iceLeft">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="iceRight">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="###">
									<img src="img/f.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="iceLeft">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="iceRight">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
						</ul>
						<ul class="tabLoading"></ul>						
					</div>	
					
				</div>
				
				
			</div>
		
			</div>
		</div>
		<div id="scrollBar"></div>
	</body>
	<script type="text/javascript" src="js/transform.js"></script>
	<script type="text/javascript" src="js/drag.js"></script>
	<script type="text/javascript">
		//清除默认行为
		document.addEventListener('touchstart',function(event){
			event.preventDefault();
		});
		
		//rem适配
		(function(){
			var styleNode = document.createElement('style');
			var width = document.documentElement.clientWidth;
			styleNode.innerHTML = 'html{font-size: '+ width/16 +'px !important;}';
			document.head.appendChild(styleNode);
		})();
		
		window.onload = function(){
			getFocus();
			changeMenu();
			navDrag();
			changeColor();
			banner();
			tab();
			moveY();
		};
		//竖向滑屏
		function moveY(){
			var conWrap = document.getElementById('conWrap');
			var scrollBar = document.getElementById('scrollBar');
			var content = document.getElementById('content');
			//滚动条高度
			var scale = document.documentElement.clientHeight/content.offsetHeight;
			scrollBar.style.height = document.documentElement.clientHeight * scale + 'px'; 
		
			//滚动条的逻辑
			var callback = {
				start : function(){
					//显示滚动条
					scrollBar.style.opacity = '1';
				},
				move : function(){
					//显示滚动条
					scrollBar.style.opacity = '1';
					//滚动条的偏移量 = 内容偏移量 * scale
					var dis = transformCss(content,'translateY')*scale;
					transformCss(scrollBar,'translateY',-dis);
				},
				end : function(){
					//滚动条消失
					scrollBar.style.opacity = '0';
				}
			};
			drag(conWrap,callback);
			
		};
		
		//获取焦点与失去焦点
		function getFocus(){
			var textNode = document.querySelector('input[type="text"]');
			
			textNode.addEventListener('touchstart',function(event){
//				console.log(111111)
				//获取焦点
				this.focus();
				//取消冒泡
				event.stopPropagation();
			});
			document.addEventListener('touchstart',function(){
//				console.log(22222);
				//失去焦点
				textNode.blur();
			});
			
		};
		
		
		
		//tab
		function tab(){
			
			var tabWrap = document.querySelectorAll('.tabWrap');
			var tabNav = document.querySelectorAll('.tabNav');
			
			var target = tabNav[0].offsetWidth;
			
			for (var i=0;i<tabWrap.length;i++) {
								
				//主体逻辑
				move(tabWrap[i],tabNav[i]);
			};
			
			function move(tabWrap,tabNav){
				transformCss(tabWrap,'translateZ',0.1);
				//显示中间ul区域（主体）
				transformCss(tabWrap,'translateX',-target);
				
				//拖动
				//手指初始位置
				var startX = 0;
				//元素初始位置
				var eleX = 0;
				//防抖动
				var startY = 0;
				var isFirst = true;
				var isX = true;
				
				//load是否显示出来
				var isLoad = false;
				var loadings = tabWrap.querySelectorAll('.tabLoading');
				//console.log(loadings.length);
				
				//小绿
				var smallGreen = tabNav.querySelector('.smallGreen');
				transformCss(smallGreen,'translateZ',0.001);
				var aNodes = tabNav.querySelectorAll('.tabNav a');
				//console.log(aNodes.length);
				var nowA = 0;
				
				
				tabWrap.addEventListener('touchstart',function(event){
					var touch = event.changedTouches[0];
					
					if(isLoad){
						return;
					};
					
					//清除过渡
					tabWrap.style.transition = 'none';
					
					eleX = transformCss(tabWrap,'translateX');
					startX = touch.clientX;
					startY = touch.clientY;
					
					//清除上一次的数值
					isFirst = true;
					isX = true;
				});
				tabWrap.addEventListener('touchmove',function(event){
					var touch = event.changedTouches[0];
					
					if(isLoad){
						return;
					};
					
					if(!isX){
						return;
					};
					
					//手指结束位置
					var endX = touch.clientX;
					var endY = touch.clientY;
					//手指距离差
					var disX = endX - startX;
					var disY = endY - startY;
					
					//防抖动
					if(isFirst){
						isFirst = false;
						if(Math.abs(disY) > Math.abs(disX)){
							isX = false;
							return;
						};					
					};
					
					//确定元素位置
					transformCss(tabWrap,'translateX',disX+eleX);
					
					//手指划过1/2
					if(Math.abs(disX) > target/2){
						
						var translateX = disX > 0 ? 0 : -2*target;
												
						tabWrap.style.transition = '0.2s';
						transformCss(tabWrap,'translateX',translateX);
										
						//小绿
						//nowA
						if(disX < 0){
							nowA = nowA + 1;
						}else{
							nowA = nowA - 1;
						};
						if(nowA > aNodes.length-1){
							nowA = 0;
						}else if(nowA < 0){
							nowA = aNodes.length-1;
						};
						//console.log(nowA);
						smallGreen.style.transition = '1s';
						transformCss(smallGreen,'translateX',aNodes[nowA].offsetLeft);
										
						//load图该出来了
						isLoad = true;
						
						tabWrap.addEventListener('transitionEnd',fun);
						tabWrap.addEventListener('webkitTransitionEnd',fun);
						
						function fun(){
							//loading图真正显示部分
//							for (var i=0;i<loadings.length;i++) {
//								loadings[i].style.opacity = '1';
//							};

							if(disX > 0){
								//向右滑动 -- 前一张load显示
								loadings[0].style.opacity = '1';
							}else{
								//向左滑动  -- 后一张 load 显示
								loadings[1].style.opacity = '1';
							};
							
							
							
							//loading转 3s
							setTimeout(function(){
								//主体内容回来 -- 数据请求回来
								tabWrap.style.transition = 'none';
								transformCss(tabWrap,'translateX',-target);
								//load图隐藏起来了
								isLoad = false;
								for (var i=0;i<loadings.length;i++) {
									loadings[i].style.opacity = '0';
								};
							},300);
							
							//解绑
							tabWrap.removeEventListener('transitionEnd',fun);
							tabWrap.removeEventListener('webkitTransitionEnd',fun);
						};
						
						
					};
					
				});
				tabWrap.addEventListener('touchend',function(event){
					var touch = event.changedTouches[0];
					
					if(isLoad){
						return;
					};
					
					var endX = touch.clientX;
					var disX = endX - startX;
					//手指没有划过1/2
					if(Math.abs(disX) < target/2){
						tabWrap.style.transition = '0.2s';
						transformCss(tabWrap,'translateX',-target);
					};
					
					
				});
				
			};
		};
		
		//无缝逻辑		
		function banner(){
			var wrap = document.getElementById('pic_wrap');
			var list = document.getElementById('pic_list');
			transformCss(list,'translateZ',0.1);
			list.innerHTML += list.innerHTML;
			
			var liNodes = document.querySelectorAll('#pic_list li');
			var spanNodes = document.querySelectorAll('#pic_icons span');
			
			//布局
			var styleNode = document.createElement('style');
			styleNode.innerHTML = '#pic_list{width: '+ liNodes.length +'00%;}';
			styleNode.innerHTML += '#pic_list li{width: '+ 100/liNodes.length +'%;}';
			styleNode.innerHTML += '#pic_wrap{height: '+ liNodes[0].offsetHeight +'px;}'
			document.head.appendChild(styleNode);
			
			//拖动
			var eleX = 0;
			var startX = 0;
			
			
			//定时器
			var timer = 0;
			
			//图片索引下标
			var now = 0;
			
			//防抖动
			var startY = 0;
			//判断是不是第一次touchmove
			var isFirst = true;
			//判断x方向逻辑是否执行
			var isX = true;
			
			wrap.addEventListener('touchstart',function(event){
				var touch = event.changedTouches[0];
				//关闭定时器
				clearInterval(timer);
				
				//清除过渡
//				list.style.transition = '0s';
				list.style.transition = 'none';
				
				//无缝
				var left = transformCss(list,'translateX');
				var now = Math.round(-left/document.documentElement.clientWidth);				
				if(now == 0){
					//now = 0  === now=5
					now = spanNodes.length;
				}else if(now == liNodes.length-1){
					//now =9  === now=4
					now = spanNodes.length-1;
				};
				//跳转
				transformCss(list,'translateX',-now*document.documentElement.clientWidth)
				
				
				//读
				eleX = transformCss(list,'translateX');

				startX = touch.clientX;
				startY = touch.clientY;
				
				//清除上一次的值
				isFirst = true;
				isX = true;
				
			});
			wrap.addEventListener('touchmove',function(event){
				var touch = event.changedTouches[0];
				
				if(!isX){
					return;
				};
				
				var endX = touch.clientX;
				var endY = touch.clientY;
				
				//手指距离差
				var disX = endX - startX;
				var disY = endY - startY;
				
				//防抖动
				if(isFirst){
					isFirst = false;
					// disY > disX ，
					if(Math.abs(disY) > Math.abs(disX)){
						// x方向的逻辑需要被禁止掉
						isX = false;
						//console.log(111111)
						return; // 禁止第一份touchmove的逻辑
						//console.log(2222222)
					};
					//console.log(3333333)
					
				};
				
				//console.log(44444444)
				
				//确定元素位置
				transformCss(list,'translateX',disX + eleX);
								
			});
			//跳转
			wrap.addEventListener('touchend',function(){
				
				//ul 的 left 值  == disX + eleX
				var left = transformCss(list,'translateX');

				now = Math.round(-left/document.documentElement.clientWidth);
				
				//限定范围
				if(now < 0){
					now = 0;
				}else if(now > liNodes.length-1){
					now = liNodes.length-1;
				};
				
				//2d变换
				//过渡
				list.style.transition = '1s';
				transformCss(list,'translateX',-now * document.documentElement.clientWidth);
				
				//小圆点
				//1.给所有span 添加 class = '';
				for (var i=0;i<spanNodes.length;i++) {
					spanNodes[i].className = '';
				};				
				//2.对应点span  now   class = 'active';
				spanNodes[now%spanNodes.length].className = 'active';
						
						
				//开启定时器
				auto();
			});
			
			
			//开启定时器
			auto();
			function auto(){
				
				//自动轮播
				timer = setInterval(function(){
					
					//无缝
					//now == 9  now = 4
					if(now == liNodes.length-1){
						now = spanNodes.length-1;
					};
					//不要过渡
					list.style.transition = 'none';
					//无缝跳转
					transformCss(list,'translateX',-now*document.documentElement.clientWidth)
					
					
					setTimeout(function(){
						//自动跳转
						now++;
						//过渡
						list.style.transition = '1s';
						//确定元素新的位置
						transformCss(list,'translateX',-now*document.documentElement.clientWidth)
					
						//小圆点
						//1.给所有span 添加 class = '';
						for (var i=0;i<spanNodes.length;i++) {
							spanNodes[i].className = '';
						};				
						//2.对应点span  now   class = 'active';
						spanNodes[now%spanNodes.length].className = 'active';
				
					},20);
					
				
				},3000);
				
			};
			
		};
		
		//点击变色
		
		function changeColor(){
			var liNodes = document.querySelectorAll('#navsList li');			
			for(var i=0;i<liNodes.length;i++){
				//误触
				var flag = false;
				liNodes[i].addEventListener('touchmove',function(){					
					flag = true;
				});				
				//给每一个li绑定 touchend
				liNodes[i].addEventListener('touchend',function(){
					if(!flag){
						//点击变色
						//给每一个li 添加class
						for(var j=0;j<liNodes.length;j++){
							liNodes[j].className = '';
						};
						//点击谁，谁变色
						this.className = 'active';
					};					
					//重置
					flag = false;
				});								
				
			};
			
		};
		
		//导航
		
		function navDrag(){
			var navsWrap = document.getElementById('navsWrap');
			var navsList = document.getElementById('navsList');
			
			transformCss(navsList,'translateZ',0.1)
			
			var eleX = 0;
			var startX = 0;
			
			//加速变量
			//初始位置
			var S1 = 0;
			// 结束位置
			var S2 = 0;
			//初始时间
			var T1 = 0;
			//结束时间
			var T2 = 0;
			//距离差
			var SValue = 0;
			//时间差
			var　TValue = 1;
			
			navsWrap.addEventListener('touchstart',function(event){
				var touch = event.changedTouches[0];
				
				//清除过渡
				navsList.style.transition = 'none';
				
				eleX = transformCss(navsList,'translateX');
				startX = touch.clientX;
				
				//初始位置
				S1 = eleX;
				//初始时间   getTime() 毫秒
				T1 = new Date().getTime();
				
				//清除上一次的位移值
				SValue = 0;
				
			});
			navsWrap.addEventListener('touchmove',function(event){
				var touch = event.changedTouches[0];
				var endX = touch.clientX;
				//手指距离差
				var disX = endX - startX;
				//范围限定
				//橡皮筋 拖动    越来越难拖
				var translateX = disX+eleX;
				//console.log(translateX)
				if(translateX > 0){
					//比例：逐渐减小 
					var scale = 1 - translateX/document.documentElement.clientWidth;
					//console.log(scale)
					translateX = translateX * scale;
					//console.log(translateX)
					
				}else if(translateX < document.documentElement.clientWidth-navsList.offsetWidth){
					//右边留白   over 正值
					var over = (document.documentElement.clientWidth-navsList.offsetWidth) - translateX;
					//比例：逐渐减小 
					var scale = 1 - over/document.documentElement.clientWidth;
					
					//新的 translateX  = 临界值 + over*scale
					translateX = document.documentElement.clientWidth-navsList.offsetWidth - over*scale;
				};
				//确定元素位置
				transformCss(navsList,'translateX',translateX);
			
				
				//结束位置
				S2 = translateX;
				//结束时间
				T2 = new Date().getTime();
				//距离差
				SValue = S2 - S1;
				//时间差
				TValue = T2 - T1;
			});
			//加速
			navsWrap.addEventListener('touchend',function(){
				//速度      NaN
				var speed = SValue / TValue;  
				
				//console.log(speed)
				
				//加速的路程 = touchmove产生的位移值 + 速度产生的值
				var target = transformCss(navsList,'translateX') +speed*100;
				
				//橡皮筋回弹
				var bezier = '';
				if(target > 0){
					target = 0;
					bezier = 'cubic-bezier(.19,1.43,.9,1.54)';
				}else if(target < document.documentElement.clientWidth-navsList.offsetWidth){
					target = document.documentElement.clientWidth-navsList.offsetWidth;
					bezier = 'cubic-bezier(.19,1.43,.9,1.54)';
				};
				
				//过渡
				navsList.style.transition = '0.5s '+bezier;
				transformCss(navsList,'translateX',target);
			});
		};
		
		//菜单按钮切换
		
		function changeMenu(){
			var menuBtn = document.getElementById('menuBtn');
			var list = document.getElementById('list');
			
			menuBtn.addEventListener('touchstart',function(event){
				if(menuBtn.className == 'menuBtnClose'){
					menuBtn.className = 'menuBtnOpen';
					list.style.display = 'block';
				}else if(menuBtn.className == 'menuBtnOpen'){
					menuBtn.className = 'menuBtnClose';
					list.style.display = 'none';
				};	
				//取消冒泡
				event.stopPropagation();
			});
			//点击屏幕任意区域，盒子消失
			document.addEventListener('touchstart',function(){
				if(menuBtn.className == 'menuBtnOpen'){
					menuBtn.className = 'menuBtnClose';
					list.style.display = 'none';
				};
			});
			list.addEventListener('touchstart',function(event){
				//取消冒泡
				event.stopPropagation();
			});
		};
		
	</script>
</html>
